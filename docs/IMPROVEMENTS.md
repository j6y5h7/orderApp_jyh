# 프로젝트 개선사항

## 1. 현재 구조 요약

- **프론트엔드**: `ui/` (Vite + React)
  - `index.html` → `ui/index.html` (소스), 빌드 시 `ui/dist/index.html` 생성
  - 주문/재고/관리자 상태는 모두 App.jsx에서 로컬 state로 관리
- **문서**: `docs/` (PRD 등)

---

## 2. 코드·아키텍처

| 항목 | 현재 | 개선 제안 |
|------|------|-----------|
| **상태 위치** | 주문·재고·장바구니가 모두 `App.jsx`에 있음 | 백엔드 연동 전까지는 유지 가능. 연동 시 Context 또는 전역 상태(예: Zustand)로 분리하면 재사용·테스트에 유리 |
| **ID 생성** | `nextCartItemId`, `nextOrderId`가 모듈 스코프 | Strict Mode 이중 마운트 시 이론상 중복 가능. `useId` 또는 `useRef`로 앱 생명주기 기준 ID 생성 고려 |
| **주문·재고 데이터** | 메모리만 사용, 새로고침 시 초기화 | 백엔드 API 연동 후 주문/재고는 서버·DB 기준으로 조회·갱신 (PRD 기술 스택: Node.js, Express, PostgreSQL) |
| **환경별 설정** | API base URL 등 없음 | 백엔드 도입 시 `import.meta.env.VITE_API_URL` 등으로 분리 |

---

## 3. 사용자 경험(UX)·접근성

| 항목 | 개선 제안 |
|------|-----------|
| **주문 완료 피드백** | 현재 alert/토스트만 사용. 주문 번호·예상 대기 시간을 보여주는 완료 화면 또는 모달 추가 (PRD 4.4.4) |
| **에러 메시지** | 네트워크/서버 오류 시 사용자용 메시지와 재시도 버튼 (PRD 4.4.4, 4.5) |
| **품절·재고 부족** | 품절 뱃지·비활성화는 구현됨. “재고 소진 시 알림” 등은 선택 사항 |
| **접근성** | 이미지 alt, 버튼 aria-label, 토스트 aria-live 적용됨. 포커스 관리(모달·토스트), 키보드만으로 주문 완료 가능 여부 점검 권장 |
| **반응형** | 장바구니·관리자 반응형 있음. 매우 작은 화면에서 터치 타겟 44px 이상 재확인 (PRD 4.5) |

---

## 4. 품질·테스트

| 항목 | 개선 제안 |
|------|-----------|
| **단위 테스트** | React Testing Library로 `Cart`, `Admin`, 재고/주문 로직(유틸 또는 커스텀 훅) 테스트 추가 |
| **E2E** | Playwright 등으로 “메뉴 담기 → 수량 변경 → 주문하기”, “관리자 재고 변경 → 주문 화면 품절 반영” 시나리오 자동화 |
| **린트·포맷** | ESLint, Prettier 도입 후 `npm run build` 전에 실행해 품질 일관성 유지 |
| **타입** | TypeScript 전환 시 주문/재고/메뉴 타입을 한곳에 정의해 API 스펙과 맞추기 쉬움 |

---

## 5. 성능

| 항목 | 개선 제안 |
|------|-----------|
| **이미지** | 외부 URL 사용 중. 필요 시 최적 크기·포맷(WebP), lazy loading 유지 |
| **번들** | 코드 스플리팅(React.lazy + Suspense)으로 주문/관리자 탭 분리 시 초기 로딩 감소 |
| **리렌더** | `addToCart` 등이 cart/stock 의존으로 자주 재생성됨. 필요 시 콜백 메모이제이션·하위 컴포넌트 분리로 범위 축소 |

---

## 6. 백엔드 연동 준비

| 항목 | 개선 제안 |
|------|-----------|
| **API 계층** | `fetch` 또는 axios를 쓰는 `api/orders.js`, `api/stock.js` 등으로 분리. 환경변수로 base URL 설정 |
| **주문 생성** | 주문 시 API 호출 → 성공 시 장바구니 비우기·토스트, 실패 시 에러 메시지 (PRD 4.4.4) |
| **재고** | 관리자 재고 변경을 API로 저장, 주문 화면은 API 또는 폴링/WebSocket으로 최신 재고 반영 |
| **주문 목록·상태** | 관리자 주문 현황는 API에서 목록·상태 조회, “제조시작/제조완료”는 API PATCH 등으로 반영 |
| **order.items** | 이미 `menuId` 포함. 서버에서 메뉴별 재고 차감·통계에 활용 가능 |

---

## 7. 배포·운영

| 항목 | 개선 제안 |
|------|-----------|
| **빌드 결과** | 기본값 유지 시 `ui/dist/`에 생성. GitHub Pages 등 정적 호스팅은 `ui/dist` 내용을 서비스하거나, CI에서 빌드 후 해당 폴더만 배포 |
| **환경 분리** | 개발/스테이징/운영용 API URL을 `.env.development`, `.env.production` 등으로 구분 |
| **에러 리포팅** | 운영 환경에서 클라이언트 에러를 로깅/리포팅 서비스에 보내면 디버깅에 유리 (선택) |

---

## 8. 문서·협업

| 항목 | 개선 제안 |
|------|-----------|
| **API 스펙** | 백엔드와 주문/재고/메뉴 API 요청·응답 형식을 문서화(예: `docs/API.md`)하면 프론트 연동이 수월 |
| **실행 방법** | `README.md`에 `npm install`, `npm run dev`, `npm run build` 및 환경변수 요약 정리 |
| **PRD 반영** | PRD의 “COZY” 등 예시 문구를 현재 브랜드명 “AI Coffee”와 맞출지 결정 후 문서 업데이트 |

---

## 9. 우선 적용 권장 순서

1. **백엔드 연동**  
   주문 생성·재고·주문 목록을 API로 옮기고, 프론트는 해당 API만 사용하도록 변경.
2. **에러·주문 완료 UX**  
   주문 실패 시 메시지·재시도, 주문 성공 시 완료 화면/모달.
3. **테스트**  
   핵심 플로우(담기, 수량, 재고, 주문 제출) 단위·E2E 테스트 추가.
4. **코드 품질**  
   ESLint/Prettier, 필요 시 TypeScript 도입.

이 문서는 필요에 따라 항목을 추가·수정해 가며 사용하면 됩니다.
